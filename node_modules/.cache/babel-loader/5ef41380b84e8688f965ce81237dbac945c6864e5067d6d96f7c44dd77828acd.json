{"ast":null,"code":"import React,{createContext,useContext,useReducer,useEffect}from'react';import{useLocalStorage}from'../hooks/useLocalStorage';import{STORAGE_KEY,PRIORITY_LEVELS,FILTER_TYPES}from'../utils/constants';import{generateId,filterTodos,sortTodosByPriority}from'../utils/helpers';import{jsx as _jsx}from\"react/jsx-runtime\";const TodoContext=/*#__PURE__*/createContext();const initialState={todos:[],filter:FILTER_TYPES.ALL,searchTerm:'',showAddForm:false,editingId:null,editValue:''};const todoReducer=(state,action)=>{switch(action.type){case'SET_TODOS':return{...state,todos:action.payload};case'ADD_TODO':const newTodo={id:generateId(),text:action.payload.text,completed:false,priority:action.payload.priority||PRIORITY_LEVELS.MEDIUM,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return{...state,todos:[newTodo,...state.todos],showAddForm:false};case'TOGGLE_TODO':return{...state,todos:state.todos.map(todo=>todo.id===action.payload?{...todo,completed:!todo.completed,updatedAt:new Date().toISOString()}:todo)};case'DELETE_TODO':return{...state,todos:state.todos.filter(todo=>todo.id!==action.payload)};case'UPDATE_TODO':return{...state,todos:state.todos.map(todo=>todo.id===action.payload.id?{...todo,...action.payload.updates,updatedAt:new Date().toISOString()}:todo),editingId:null,editValue:''};case'SET_FILTER':return{...state,filter:action.payload};case'SET_SEARCH_TERM':return{...state,searchTerm:action.payload};case'SET_SHOW_ADD_FORM':return{...state,showAddForm:action.payload};case'START_EDITING':return{...state,editingId:action.payload.id,editValue:action.payload.text};case'CANCEL_EDITING':return{...state,editingId:null,editValue:''};case'SET_EDIT_VALUE':return{...state,editValue:action.payload};default:return state;}};export const TodoProvider=_ref=>{let{children}=_ref;const[state,dispatch]=useReducer(todoReducer,initialState);const[,setStoredTodos]=useLocalStorage(STORAGE_KEY,[]);// Load todos from localStorage on mount\nuseEffect(()=>{const savedTodos=JSON.parse(localStorage.getItem(STORAGE_KEY)||'[]');if(savedTodos.length>0){dispatch({type:'SET_TODOS',payload:savedTodos});}else{// Default todos for demo\nconst defaultTodos=[{id:generateId(),text:'Complete project proposal',completed:false,priority:PRIORITY_LEVELS.HIGH,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:generateId(),text:'Review code changes',completed:true,priority:PRIORITY_LEVELS.MEDIUM,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:generateId(),text:'Schedule team meeting',completed:false,priority:PRIORITY_LEVELS.LOW,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}];dispatch({type:'SET_TODOS',payload:defaultTodos});}},[]);// Save todos to localStorage whenever todos change\nuseEffect(()=>{setStoredTodos(state.todos);},[state.todos,setStoredTodos]);const filteredTodos=filterTodos(state.todos,state.filter,state.searchTerm);const sortedTodos=sortTodosByPriority(filteredTodos);const stats={total:state.todos.length,completed:state.todos.filter(t=>t.completed).length,active:state.todos.filter(t=>!t.completed).length};const value={...state,dispatch,filteredTodos:sortedTodos,stats};return/*#__PURE__*/_jsx(TodoContext.Provider,{value:value,children:children});};export const useTodoContext=()=>{const context=useContext(TodoContext);if(!context){throw new Error('useTodoContext must be used within a TodoProvider');}return context;};","map":{"version":3,"names":["React","createContext","useContext","useReducer","useEffect","useLocalStorage","STORAGE_KEY","PRIORITY_LEVELS","FILTER_TYPES","generateId","filterTodos","sortTodosByPriority","jsx","_jsx","TodoContext","initialState","todos","filter","ALL","searchTerm","showAddForm","editingId","editValue","todoReducer","state","action","type","payload","newTodo","id","text","completed","priority","MEDIUM","createdAt","Date","toISOString","updatedAt","map","todo","updates","TodoProvider","_ref","children","dispatch","setStoredTodos","savedTodos","JSON","parse","localStorage","getItem","length","defaultTodos","HIGH","LOW","filteredTodos","sortedTodos","stats","total","t","active","value","Provider","useTodoContext","context","Error"],"sources":["/home/codeunity/Desktop/weshly/todo-app/src/context/TodoContext.js"],"sourcesContent":["import React, { createContext, useContext, useReducer, useEffect } from 'react';\nimport { useLocalStorage } from '../hooks/useLocalStorage';\nimport { STORAGE_KEY, PRIORITY_LEVELS, FILTER_TYPES } from '../utils/constants';\nimport { generateId, filterTodos, sortTodosByPriority } from '../utils/helpers';\n\nconst TodoContext = createContext();\n\nconst initialState = {\n  todos: [],\n  filter: FILTER_TYPES.ALL,\n  searchTerm: '',\n  showAddForm: false,\n  editingId: null,\n  editValue: '',\n};\n\nconst todoReducer = (state, action) => {\n  switch (action.type) {\n    case 'SET_TODOS':\n      return { ...state, todos: action.payload };\n    \n    case 'ADD_TODO':\n      const newTodo = {\n        id: generateId(),\n        text: action.payload.text,\n        completed: false,\n        priority: action.payload.priority || PRIORITY_LEVELS.MEDIUM,\n        createdAt: new Date().toISOString(),\n        updatedAt: new Date().toISOString(),\n      };\n      return {\n        ...state,\n        todos: [newTodo, ...state.todos],\n        showAddForm: false,\n      };\n    \n    case 'TOGGLE_TODO':\n      return {\n        ...state,\n        todos: state.todos.map(todo =>\n          todo.id === action.payload\n            ? { ...todo, completed: !todo.completed, updatedAt: new Date().toISOString() }\n            : todo\n        ),\n      };\n    \n    case 'DELETE_TODO':\n      return {\n        ...state,\n        todos: state.todos.filter(todo => todo.id !== action.payload),\n      };\n    \n    case 'UPDATE_TODO':\n      return {\n        ...state,\n        todos: state.todos.map(todo =>\n          todo.id === action.payload.id\n            ? { ...todo, ...action.payload.updates, updatedAt: new Date().toISOString() }\n            : todo\n        ),\n        editingId: null,\n        editValue: '',\n      };\n    \n    case 'SET_FILTER':\n      return { ...state, filter: action.payload };\n    \n    case 'SET_SEARCH_TERM':\n      return { ...state, searchTerm: action.payload };\n    \n    case 'SET_SHOW_ADD_FORM':\n      return { ...state, showAddForm: action.payload };\n    \n    case 'START_EDITING':\n      return {\n        ...state,\n        editingId: action.payload.id,\n        editValue: action.payload.text,\n      };\n    \n    case 'CANCEL_EDITING':\n      return {\n        ...state,\n        editingId: null,\n        editValue: '',\n      };\n    \n    case 'SET_EDIT_VALUE':\n      return { ...state, editValue: action.payload };\n    \n    default:\n      return state;\n  }\n};\n\nexport const TodoProvider = ({ children }) => {\n  const [state, dispatch] = useReducer(todoReducer, initialState);\n  const [, setStoredTodos] = useLocalStorage(STORAGE_KEY, []);\n\n  // Load todos from localStorage on mount\n  useEffect(() => {\n    const savedTodos = JSON.parse(localStorage.getItem(STORAGE_KEY) || '[]');\n    if (savedTodos.length > 0) {\n      dispatch({ type: 'SET_TODOS', payload: savedTodos });\n    } else {\n      // Default todos for demo\n      const defaultTodos = [\n        {\n          id: generateId(),\n          text: 'Complete project proposal',\n          completed: false,\n          priority: PRIORITY_LEVELS.HIGH,\n          createdAt: new Date().toISOString(),\n          updatedAt: new Date().toISOString(),\n        },\n        {\n          id: generateId(),\n          text: 'Review code changes',\n          completed: true,\n          priority: PRIORITY_LEVELS.MEDIUM,\n          createdAt: new Date().toISOString(),\n          updatedAt: new Date().toISOString(),\n        },\n        {\n          id: generateId(),\n          text: 'Schedule team meeting',\n          completed: false,\n          priority: PRIORITY_LEVELS.LOW,\n          createdAt: new Date().toISOString(),\n          updatedAt: new Date().toISOString(),\n        },\n      ];\n      dispatch({ type: 'SET_TODOS', payload: defaultTodos });\n    }\n  }, []);\n\n  // Save todos to localStorage whenever todos change\n  useEffect(() => {\n    setStoredTodos(state.todos);\n  }, [state.todos, setStoredTodos]);\n\n  const filteredTodos = filterTodos(state.todos, state.filter, state.searchTerm);\n  const sortedTodos = sortTodosByPriority(filteredTodos);\n\n  const stats = {\n    total: state.todos.length,\n    completed: state.todos.filter(t => t.completed).length,\n    active: state.todos.filter(t => !t.completed).length,\n  };\n\n  const value = {\n    ...state,\n    dispatch,\n    filteredTodos: sortedTodos,\n    stats,\n  };\n\n  return (\n    <TodoContext.Provider value={value}>\n      {children}\n    </TodoContext.Provider>\n  );\n};\n\nexport const useTodoContext = () => {\n  const context = useContext(TodoContext);\n  if (!context) {\n    throw new Error('useTodoContext must be used within a TodoProvider');\n  }\n  return context;\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}